@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@using System.Web;
@{
    ViewBag.Title = "系统数据总览";
   
}

  <script type="text/javascript" src="~/assets/plugins/highcharts.js"></script>
  <script type="text/javascript" src="~/assets/plugins/exporting.js"></script>
 <script type="text/javascript">
     $(document).ready(function () {

         $(function () {

             $.ajax({
                 url: '@Url.Action("GetDataByYear", "ApplyInfo")',
                 type: 'Post',
                 dataType: 'json',
                 contentType: 'application/json',
                 success: function (data) {


                     $('#d1').highcharts({
                         title: {
                             text: '注册人数统计图',
                             x: -20 //center
                         },
                         subtitle: {
                             text: '',
                             x: -20
                         },
                         xAxis: {
                             //categories: ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12']
                             categories: data[0]
                         },
                         yAxis: {
                             title: {
                                 text: '人数 (个)'
                             },
                             plotLines: [{
                                 value: 0,
                                 width: 1,
                                 color: '#808080'
                             }]
                         },
                         tooltip: {
                             valueSuffix: '个'
                         },
                         legend: {
                             layout: 'vertical',
                             align: 'right',
                             verticalAlign: 'middle',
                             borderWidth: 0
                         },
                         series: data[1]
                         //series: [{
                         //    name: '初级质检员',
                         //    data: [70, 69, 95, 145, 18, 21, 25, 26, 53, 48, 43, 49]
                         //}, {
                         //    name: '中级质检员',
                         //    data: [70, 67, 69, 142, 18, 20, 22, 87.1, 51, 46, 40, 47]
                         //}, {
                         //    name: '高级质检员',
                         //    data: [1, 2, 3, 8, 3, 1, 0, 1, 3, 9, 3, 1]
                         //}
                         //]
                     });
                 }

             });
         });

         $(function () {
             $.ajax({
                 url: '@Url.Action("GetDataByPro", "ApplyInfo")',
                 type: 'Post',
                 dataType: 'json',
                 contentType: 'application/json',
                 success: function (data) {



                     $('#d2').highcharts({
                         chart: {
                             type: 'column'
                         },
                         title: {
                             text: '专业与级别对比分析图'
                         },
                         xAxis: {
                             //categories: ['2010', '2011', '2012', '2013', '2014']
                             categories: data[0]
                         },
                         yAxis: {
                             min: 0,
                             title: {
                                 text: ''
                             }
                         },
                         tooltip: {
                             pointFormat: '<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b> ({point.percentage:.0f}%)<br/>',
                             shared: true
                         },
                         plotOptions: {
                             column: {
                                 stacking: 'percent'
                             }
                         },
                         series: data[1]
                         //series: [{
                         //    name: '初级质检员',
                         //    data: [9]
                         //},
                         //{
                         //    name: '中级质检员',
                         //    data: [3]
                         //},
                         //{
                         //    name: '高级质检员',
                         //    data: [1]
                         //}]
                     });
                 }

             });
                  });

         $(function () {
             $.ajax({
                 url: '@Url.Action("GetDataByGrade", "ApplyInfo")',
                  type: 'Post',
                  dataType: 'json',
                  contentType: 'application/json',
                  success: function (data) {



                      $('#d3').highcharts({
                          chart: {
                              type: 'column'
                          },
                          title: {
                              text: '级别与专业对比分析图'
                          },
                          xAxis: {
                              //categories: ['2010', '2011', '2012', '2013', '2014']
                              categories:data[0]
                          },
                          yAxis: {
                              min: 0,
                              title: {
                                  text: ''
                              }
                          },
                          tooltip: {
                              pointFormat: '<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b> ({point.percentage:.0f}%)<br/>',
                              shared: true
                          },
                          plotOptions: {
                              column: {
                                  stacking: 'percent'
                              }
                          },
                          series: data[1]
                          //series: [{
                          //    name: '初级质检员',
                          //    data: [9]
                          //},
                          //{
                          //    name: '中级质检员',
                          //    data: [3]
                          //},
                          //{
                          //    name: '高级质检员',
                          //    data: [1]
                          //}]
                      });
                  }

             });
         });


         $(function () {

             $.ajax({
                 url: '@Url.Action("GetAreaData", "ApplyInfo")',
                  type: 'Post',
                  dataType: 'json',
                  contentType: 'application/json',
                  success: function (data) {


                      $('#d4').highcharts({
                          chart: {
                              type: 'pie',
                              options3d: {
                                  enabled: true,
                                  alpha: 45,
                                  beta: 0
                              }
                          },
                          title: {
                              text: '各级别对比分析图'
                          },
                          tooltip: {
                              pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
                          },
                          plotOptions: {
                              pie: {
                                  allowPointSelect: true,
                                  cursor: 'pointer',
                                  depth: 35,
                                  dataLabels: {
                                      enabled: true,
                                      format: '{point.name}'
                                  }
                              }
                          },
                          series: [{
                              type: 'pie',
                              name: '份额比例',
                              //data: [
                              //    ['初级质检员', 25.0],
                              //    ['中级质检员', 20.0],
                              //    ['高级质检员', 46.8],


                              //]
                              data:data
                          }]
                      });
                  }

             });
         });
        
     });
</script>
<div class="row">
    <div class="panel panel-default">
        <div class="panel-heading no-collapse">系统数据总览</div>
        <div class="row">
            <div class="col-md-6" id="d1">

            </div>
            <div class="col-md-6" id="d2">

            </div>
        </div>
        <div class="row">
            <div class="col-md-6" id="d3">

            </div>
            <div class="col-md-6" id="d4">

            </div>
        </div>
    </div>
</div>